{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build STM32",
            "type": "shell",
            "command": "make",
            "options": {"cwd": "stm32-firmware"},
            "group": "build"
        },
        {
            "label": "Clean STM32",
            "type": "shell",
            "command": "make clean",
            "options": {"cwd": "stm32-firmware"}
        },
        {
            "label": "Run QEMU",
            "type": "shell",
            "command": "qemu-system-arm -M stm32-p103 -kernel build/firmware.bin -serial stdio",
            "options": {"cwd": "stm32-firmware"},
            "group": "test"
        },
        {
            "label": "Run QEMU with Debug",
            "type": "shell",
            "command": "qemu-system-arm -M stm32-p103 -kernel build/firmware.bin -serial stdio -S -s",
            "options": {"cwd": "stm32-firmware"}
        },
        {
            "label": "Run Pi Code",
            "type": "shell",
            "command": "python flight_controller.py",
            "options": {"cwd": "raspberry-pi-code"}
        },
        {
            "label": "Run Ground Station",
            "type": "shell",
            "command": "python ground_station.py",
            "options": {"cwd": "ground-station"}
        },
        {
            "label": "Run All",
            "dependsOn": ["Run QEMU", "Run Pi Code", "Run Ground Station"],
            "dependsOrder": "parallel"
        }
    ]
}